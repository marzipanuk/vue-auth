!function(t){var e={};function o(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=e,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(r,i,function(e){return t[e]}.bind(null,i));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=1)}([function(t,e){t.exports=function(){function t(t,e,o){var r=this.options.cookieDomain(),i=t+"="+e+"; Expires="+new Date((new Date).getTime()+o).toUTCString()+";";"localhost"!==r&&(i+=" Path=/; Domain="+r+";secure"),document.cookie=i}return{remember:function(e){t.call(this,"rememberMe",!0===e?"true":"false",!0===e?12096e5:void 0)},set:function(e,o,r){o&&t.call(this,e,o,12096e5)},get:function(t){var e,o,r=document.cookie;for(e=0,o=(r=r.replace(/;\s+/g,";").split(";").map((function(t){return t.replace(/\s+\=\s+/g,"=").split("=")}))).length;e<o;e++)if(r[e][0]&&r[e][0]===t)return r[e][1];return null},exists:function(t){return document.cookie.match(/rememberMe/)},remove:function(e){t.call(this,e,"",-12096e5)}}}()},function(t,e,o){var r=o(2)();t.exports=function(t,e){var o=new r(t,e),i=o.ready,n=o.login,s=o.fetch,a=o.logout,c=o.oauth2,l=o.refresh,u=o.register,h=o.impersonate,p=o.unimpersonate;t.auth=o,Object.defineProperties(t.prototype,{$auth:{get:function(){return o.ready=i.bind(this),o.login=n.bind(this),o.fetch=s.bind(this),o.logout=a.bind(this),o.oauth2=c.bind(this),o.refresh=l.bind(this),o.register=u.bind(this),o.impersonate=h.bind(this),o.unimpersonate=p.bind(this),o}}})}},function(t,e,o){var r=o(3),i=o(4),n=o(0);t.exports=function(){var t=null,e=null,o=null;function s(t,e){var o=this,i=e.success;return(e=r.extend(this.options[t+"Data"],[e])).success=function(r){e.success=i,o.options[t+"Process"].call(o,r,e)},this.options.http._http.call(this,e)}function a(t,e){var o=this.$auth;return o.options[t+"Perform"].call(o,o.options.router._bindData.call(o,e,this))}function c(t){return null===this.watch.authenticated&&i.get.call(this)?n.exists.call(this)?(this.watch.authenticated=!1,this.options.fetchData.enabled?void this.options.fetchPerform.call(this,{success:t,error:t,enabled:!0}):(this.options.fetchProcess.call(this,{},{}),t.call(this))):(this.options.logoutProcess.call(this,null,{}),this.watch.loaded=!0,t.call(this)):(this.watch.loaded=!0,t.call(this))}function l(t,e){var o,r,i="",n=e&&e.path;if(n&&e.query){for(o in e.query)e.query[o]&&(i+="&"+o+"="+e.query[o]);n+="?"+i.substring(1)}this.options.http._invalidToken&&this.options.http._invalidToken.call(this,t)&&(e&&(r=this.options.getAuthMeta(e)),r&&(n=r.redirect||this.options.authRedirect),this.options.logoutProcess.call(this,t,{redirect:n}))}function u(t,e){this.watch.authenticated=!0,this.watch.data=this.options.parseUserData.call(this,this.options.http._httpData.call(this,t)),this.watch.loaded=!0,this.options.fetchData.success&&this.options.fetchData.success.call(this,t),e.success&&e.success.call(this,t)}var h={rolesVar:"roles",tokenImpersonateName:"impersonate_auth_token",tokenDefaultName:"default_auth_token",tokenStore:["localStorage","cookie"],authRedirect:{path:"/login"},forbiddenRedirect:{path:"/403"},notFoundRedirect:{path:"/404"},registerData:{url:"auth/register",method:"POST",redirect:"/login"},loginData:{url:"auth/login",method:"POST",redirect:"/",fetchUser:!0},logoutData:{url:"auth/logout",method:"POST",redirect:"/",makeRequest:!1},oauth1Data:{url:"auth/login",method:"POST"},fetchData:{url:"auth/user",method:"GET",enabled:!0},refreshData:{url:"auth/refresh",method:"GET",enabled:!0,interval:30},impersonateData:{url:"auth/impersonate",method:"POST",redirect:"/"},unimpersonateData:{url:"auth/unimpersonate",method:"POST",redirect:"/admin",makeRequest:!1},facebookData:{url:"auth/facebook",method:"POST",redirect:"/"},googleData:{url:"auth/google",method:"POST",redirect:"/"},facebookOauth2Data:{url:"https://www.facebook.com/v2.5/dialog/oauth",params:{client_id:"",redirect_uri:function(){return this.options.getUrl()+"/login/facebook"},scope:"email"}},googleOauth2Data:{url:"https://accounts.google.com/o/oauth2/auth",params:{client_id:"",redirect_uri:function(){return this.options.getUrl()+"/login/google"},scope:"https://www.googleapis.com/auth/plus.me https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/plus.profile.emails.read"}},getUrl:function(){var t=window.location.port;return window.location.protocol+"//"+window.location.hostname+(t?":"+t:"")},cookieDomain:function(){return window.location.hostname},parseUserData:function(t){return t.data||{}},parseOauthState:function(t){return JSON.parse(decodeURIComponent(t))},tokenExpired:function(){return!i.get.call(this)},check:function(t,e){return!0===this.watch.authenticated&&(!t||r.compare(t,this.watch.data[e||this.options.rolesVar]))},checkAuthenticated:c,getAuthMeta:function(t){var e,o;return t.to?e=t.to.auth:(o=t.matched.filter((function(t){return t.meta.hasOwnProperty("auth")}))).length&&(e=o[o.length-1].meta.auth),e},setTransitions:function(o){t=e,e=o},readyCallback:null,transitionEach:function(i,n,s){var a=(n||"").redirect||this.options.authRedirect,c=(n||"").forbiddenRedirect||(n||"").redirect||this.options.forbiddenRedirect,l=(n||"").redirect||this.options.notFoundRedirect;if((n=r.toArray(void 0!==(n||"").roles?n.roles:n))&&(!0===n||n.constructor===Array||r.isObject(n)))if(this.check()){if(n.constructor!==Array&&!r.isObject(n)||r.compare(n,this.watch.data[this.options.rolesVar]))return this.watch.redirect=o?{type:o,from:t,to:e}:null,o=null,s();o=403,s.call(this,c)}else o=401,s.call(this,a);else{if(!1!==n||!this.check())return this.watch.redirect=o?{type:o,from:t,to:e}:null,o=null,s();o=404,s.call(this,l)}},routerBeforeEach:function(t){var e=this;this.watch.authenticated&&!i.get.call(this)&&this.options.logoutProcess.call(this,null,{}),this.options.refreshData.enabled&&!this.watch.loaded&&i.get.call(this)?this.options.refreshPerform.call(this,{success:function(){this.options.checkAuthenticated.call(e,t)}}):c.call(this,t)},requestIntercept:function(t){var e,o;return t.ignoreVueAuth?t:(!1===t.impersonating&&this.impersonating()&&(o=this.options.tokenDefaultName),(e=i.get.call(this,o))&&this.options.auth.request.call(this,t,e),t)},responseIntercept:function(t,o){var r;o&&o.ignoreVueAuth||(l.call(this,t,e),(r=this.options.auth.response.call(this,t))&&i.set.call(this,null,r))},registerPerform:function(t){return s.call(this,"register",t)},registerProcess:function(t,e){!0===e.autoLogin?(e=r.extend(e,[this.options.loginData,{redirect:e.redirect}]),this.options.loginPerform.call(this,e)):(e.success&&e.success.call(this,t),e.redirect&&this.options.router._routerGo.call(this,e.redirect))},loginPerform:function(t){return s.call(this,"login",t)},loginProcess:function(t,e){var o=this;n.remember.call(this,e.rememberMe),this.watch.authenticated=null,this.options.fetchPerform.call(this,{enabled:e.fetchUser,success:function(){e.success&&e.success.call(this,t),e.redirect&&o.options.check.call(o)&&o.options.router._routerGo.call(o,e.redirect)}})},logoutPerform:function(t){if((t=r.extend(this.options.logoutData,[t||{}])).makeRequest)return s.call(this,"logout",t);this.options.logoutProcess.call(this,null,t)},logoutProcess:function(t,e){n.remove.call(this,"rememberMe"),n.remove.call(this,this.options.tokenImpersonateName),n.remove.call(this,this.options.tokenDefaultName),i.remove.call(this,this.options.tokenImpersonateName),i.remove.call(this,this.options.tokenDefaultName),this.watch.authenticated=!1,this.watch.data=null,e.success&&e.success.call(this,t,e),e.redirect&&this.options.router._routerGo.call(this,e.redirect)},fetchPerform:function(t){var e=this,o=t.error;if(t.error=function(t){e.watch.loaded=!0,e.options.fetchData.error&&e.options.fetchData.error.call(e,t),o&&o.call(e,t)},!0===this.watch.authenticated||t.enabled)return s.call(this,"fetch",t);u.call(this,{},t)},fetchProcess:u,refreshPerform:function(t){return s.call(this,"refresh",t)},refreshProcess:function(t,e){e.success&&e.success.call(this,t)},impersonatePerform:function(t){var e,o=this.token.call(this);return e=(t=t||{}).success,t.success=function(t){i.set.call(this,this.options.tokenImpersonateName,this.token.call(this)),i.set.call(this,this.options.tokenDefaultName,o),e&&e.call(this,t)},s.call(this,"impersonate",t)},impersonateProcess:function(t,e){var o=this;this.options.fetchPerform.call(this,{enabled:!0,success:function(){e.success&&e.success.call(this,t),e.redirect&&o.options.check.call(o)&&o.options.router._routerGo.call(o,e.redirect)}})},unimpersonatePerform:function(t){if((t=r.extend(this.options.unimpersonateData,[t||{}])).makeRequest)return s.call(this,"unimpersonate",t);this.options.unimpersonateProcess.call(this,null,t)},unimpersonateProcess:function(t,e){i.remove.call(this,this.options.tokenImpersonateName),this.options.fetchPerform.call(this,{enabled:!0,success:function(){e.success&&e.success.call(this,t,e),e.redirect&&this.options.router._routerGo.call(this,e.redirect)}})},oauth2Perform:function(t){var e,o={},i="";if(!0===(t=t||{}).code){t=r.extend(this.options[t.provider+"Data"],[t]);try{t.query.state&&(o=this.options.parseOauthState(t.query.state))}catch(t){console.error("vue-auth:error There was an issue retrieving the state data."),o={}}t.rememberMe=!0===o.rememberMe,t.state=o,this.options.loginPerform.call(this,t)}else{for(e in t.params=r.extend(this.options[t.provider+"Oauth2Data"].params,[t.params||{}]),(t=r.extend(this.options[t.provider+"Oauth2Data"],[t])).params.redirect_uri=t.redirect||t.params.redirect_uri,t.params.client_id=t.clientId||t.params.client_id,t.params.response_type=t.response_type||t.params.response_type||"code",t.params.scope=t.scope||t.params.scope,t.params.state=t.state||t.params.state||{},"function"==typeof t.params.redirect_uri&&(t.params.redirect_uri=t.params.redirect_uri.call(this)),t.params.state.rememberMe=!0===t.rememberMe,t.params.state=JSON.stringify(t.params.state),t.params)i+="&"+e+"="+encodeURIComponent(t.params[e]);window.location=t.url+"?"+i.substring(1)}}};function p(t,e){var o,i,n,s=this,a=["auth","http","router"];for(this.currentToken=null,this.options=r.extend(h,[e||{}]),this.options.Vue=t,this.watch=new this.options.Vue({data:function(){return{data:null,loaded:!1,redirect:null,authenticated:null}},watch:{loaded:function(t){!0===t&&s.options.readyCallback&&s.options.readyCallback()}}}),o=0,i=a.length;o<i;o++){if(!this.options[a[o]])return void console.error('Error (@websanova/vue-auth): "'+a[o]+'" driver must be set.');if(this.options[a[o]]._init&&(n=this.options[a[o]]._init.call(this)))return void console.error("Error (@websanova/vue-auth): "+n)}this.options.refreshData.interval&&this.options.refreshData.interval>0&&setInterval(function(){this.options.refreshData.enabled&&!this.options.tokenExpired.call(this)&&this.options.refreshPerform.call(this,{})}.bind(this),1e3*this.options.refreshData.interval*60),this.options.router._beforeEach.call(this,this.options.routerBeforeEach,this.options.transitionEach),this.options.http._interceptor.call(this,this.options.requestIntercept,this.options.responseIntercept)}return p.prototype.ready=function(t){return void 0!==t&&(this.$auth.options.readyCallback=t.bind(this)),this.$auth.watch.loaded},p.prototype.redirect=function(){return this.watch.redirect},p.prototype.user=function(t){return t&&(this.watch.data=t),this.watch.data||{}},p.prototype.check=function(t,e){return this.options.check.call(this,t,e)},p.prototype.impersonating=function(){return this.watch.data,!!i.get.call(this,this.options.tokenImpersonateName)},p.prototype.token=function(t,e){return e&&i.set.call(this,t,e),i.get.call(this,t)},p.prototype.fetch=function(t){return a.call(this,"fetch",t)},p.prototype.refresh=function(t){return a.call(this,"refresh",t)},p.prototype.register=function(t){return a.call(this,"register",t)},p.prototype.login=function(t){return a.call(this,"login",t)},p.prototype.logout=function(t){return a.call(this,"logout",t)},p.prototype.impersonate=function(t){return a.call(this,"impersonate",t)},p.prototype.unimpersonate=function(t){return a.call(this,"unimpersonate",t)},p.prototype.oauth2=function(t){return a.call(this,"oauth2",t)},p.prototype.enableImpersonate=function(){this.impersonating()&&(this.currentToken=null)},p.prototype.disableImpersonate=function(){this.impersonating()&&(this.currentToken=this.options.tokenDefaultName)},p}},function(t,e){t.exports=function(){function t(t){return null!==t&&"object"==typeof t&&t.constructor!==Array}function e(t){return"string"==typeof t||"number"==typeof t?[t]:t}return{extend:function e(o,r){var i,n,s,a={};for(s in o)t(o[s])&&"FormData"!==o[s].constructor.name?a[s]=e(o[s],{}):a[s]=o[s];for(i=0,n=r.length;i<n;i++)for(s in r[i])t(r[i][s])&&"FormData"!==r[i][s].constructor.name?a[s]=e(o[s]||{},[r[i][s]]):a[s]=r[i][s];return a},toArray:e,isObject:t,compare:function t(o,r){var i,n,s;if("[object Object]"===Object.prototype.toString.call(o)&&"[object Object]"===Object.prototype.toString.call(r)){for(s in o)if(t(o[s],r[s]))return!0;return!1}if(o=e(o),r=e(r),!o||!r||o.constructor!==Array||r.constructor!==Array)return!1;for(i=0,n=o.length;i<n;i++)if(r.indexOf(o[i])>=0)return!0;return!1}}}()},function(t,e,o){var r=o(0);t.exports=function(){function t(t){return(t=t||this.currentToken)||(this.impersonating.call(this)?this.options.tokenImpersonateName:this.options.tokenDefaultName)}function e(){try{if(!window.localStorage||!window.sessionStorage)throw"exception";return localStorage.setItem("storage_test",1),localStorage.removeItem("storage_test"),!0}catch(t){return!1}}function o(o,i,n){var s,a,c=[t.call(this,i)];for(n&&c.push(n),s=0,a=this.options.tokenStore.length;s<a;s++){if("localStorage"===this.options.tokenStore[s]&&e())return localStorage[o+"Item"](c[0],c[1]);if("cookie"===this.options.tokenStore[s])return r[o].apply(this,c)}}return{get:function(t){return o.call(this,"get",t)},set:function(t,e){return o.call(this,"set",t,e)},remove:function(t){return o.call(this,"remove",t)},expiring:function(){return!1}}}()}]);